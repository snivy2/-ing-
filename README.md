# -ing-### 那些年我们踩过的坑



##### 仅以此md来记录一些基本配置代码，以及一些棘手或不棘手的bug和报错



##### 从本人第二个个人项目开始记录（哈哈其实第一个项目好多细节没记录蛮可惜的），希望日后能够每天进步，天天吃肉哈哈哈哈哈哈







------



#### 项目：个人简单的电商网站



##### 一、快速搭建vue与express环境相关



###### 1. 前端搭建部分

 由于已在电脑全局安装过vue-cli（如果没安装先在cmd里面执行npm i -g vue-cli），这里就直接进入到自己先前创建的文件夹下，通过vscode自带的cmd工具运行”vue init webpack“ ，然后会回答几个问题，默认安装的回车就好，但是关于ESLint的问题可以否定掉，这个选项是来规范约束你的代码的，不安装可以写代码自由点。后面的测试环境也可以否定。然后就是漫长的安包时间啦~还是很方便的。

![QQ图片20190503114024](D:\个人项目\一些截图\QQ图片20190503114024.png)

大目录安装完成后可以再继续安装自己想要的外部包，比如mint-ui vuex等 用npm指令就行。



###### 2. 关于目录

详情可以看https://github.com/snivy2/vue0001我的第一个小项目里面各个文件都是写的什么

![](D:\个人项目\一些截图\QQ图片20190503114501.png)

- bulid  

里面是一些操作文件，使用npm run *    时其实执行的就是这里的文件。

- config

配置文件，执行文件需要的配置信息。

- src  

资源文件，所有的组件以及所用的图片都是在这个文件夹下放着。简单看一下这个文件夹下都放了哪些东西。

- assets 

资源文件夹，放图片之类的资源，

- components 

组件文件夹，写的所有组件都放在这个文件夹下，

- router 

路由文件夹，这个决定了页面的跳转规则，

- App.vue

应用组件，所有自己写的组件，都是在这个组件之上运行了。

- main.js   

webpack入口文件。在这个文件下导入各种包。



###### 3. 后端部分

- npm init初始化项目（创立了package文件）

  

- npm i -g express-generator安装express管理器



- npm i express 安装express框架



**！！！！！！这里踩第一个坑啦！！！！！！！Refusing to install package with name "express" under a package**

**当初文件夹起名字取得express，改下名字，删除package从第一步开始就行啦~**



- 输入express  运行框架产生目录

![](D:\个人项目\一些截图\QQ图片20190503121001.png)



- 最后 npm i 安装依赖包就行啦，和vuecli几乎一样方便，一下子环境就给搭建好了。







------



##### 二、项目开始与项目托管



###### 1. 项目开始

目录建好，项目就可以开始了，在main.js中导入自己需要的包，然后在app.vue写出项目骨架（header，footer，routerview就可以开始慢慢思考业务逻辑开始开发啦，在这之前，先把代码用git托管起来，并每天上传github，打卡是好习惯哦。



###### 2. 将项目托管到本地git

由于cli已经将目录建好，所以这里直接在cmd中输入 git init就能直接开始本地托管，然后输入git add . 生成新文件。最后git commit -m "init my project"就提交成功了。会发现带绿色标记的文件夹已经恢复到平常的样子（后面打卡就直接用vscode的可视化工具点点点就行拉）。



###### 3. 将本地已经托管的文件上传到github

本地托管完成后就是项目的上传，这里如果电脑没设置公钥，还要配置公钥等操作（github上有相关教程），这里已经配置完成，就直接开始建立新仓储。



*步骤:*

- 点+号 new repository选项，开始建立新仓储，只需写项目名字即可，其他不需要碰，然后点创建

  

- 之后跳出的页面有一些cmd的配置代码，可以选择有用的使用

  

- “or push an existing repository from the command line”下面就是已有项目的cmd命令，这里选择运行这里的代码

  

- 两行cmd命令敲完，代码就上传成功啦！！！真的是特别方便，而且和本地git一样，下次就可以直接用vscode自带的可视化工具直接点点点就可以上传了

##### 三、坑和注意点

###### 1. 二倍图技术

首页轮播图中，采用的是jd上扒下来的图片，可以看到他的显示高度是200左右，而实际图片是400左右，所以采用了二倍图的技术，我们使用时，宽设为100%，高设为200px；具体代码如下：

```css
.mint-swipe-item:nth-child(1){
  background: url(/static/imgs/lunbo1.jpg) no-repeat 0 0 / 100% 200px
}
```



###### 2. 第一个小坑

在goodinfo组件的created生命周期函数中，调用getgood方法时报错

```
 Error in created hook: "ReferenceError: getgood is not defined"
```

一开始还很迷茫，通过观察发现，在生命周期函数中调用方法时，一定要加this，否则调用不了，这点和注册的事件调用函数不一样。包括函数里用的所有data里面的数据，也都要加this。第一个坑轻松解决。（其实之前css时也有很多没有满意的排版效果，但是都通过开发者工具很方便的解决了，没有什么代表性，困扰性的坑，就不一一列出了）



原以为成功了，其实又踩坑了，手写函数还是经验不足啊，在数组中匹配到相应的对象后，把对象给页面中的空对象时，一直失败，利用vue的调试插件，发现一直为空。在想了一会儿后，发现把goodArr[i]当字符串直接赋值给了goodin对象里了，**而对象的复制要采用for循环遍历才行**

```javascript
  for (var key in this.goodArr[i]) {
            this.goodin[key] = this.goodArr[i][key];
    }
```

或者直接用对象的assign方法也可以

```javascript
  this.goodin = Object.assign({}, this.goodArr[i])
```

这里我们用通俗的for循环的方法，虽然是个小问题，也是最基础的对象的方法，但是由于不熟练直接赋值了，还是要多多练习啊，不要因为是最简单的函数就懈怠，熟能生巧。（哈哈，其实中途还是无限忘掉在前面写this，报了无数次的xxxisundefined，急不得，急不得）

![1557150661286](D:\个人项目\一些截图\1557150661286.png)



看到对象中终于有了想要的数据还是很兴奋的，哈哈~



###### 3. 有意思的小插曲

在写购物车动画时候，明明注册事件和事件都写好了，很规范，但是还是报错了undefined，找了半天找不到错，把等号后面加了个空格，居然成功了！！！一开始还以为触发了什么奇怪的玄学，为什么代码规范会影响报错，结果发现是我想多了。。。。哈哈，加空格后按了保存，之前虽然写了事件函数，注册了事件，但是没有保存。大家以后写代码一定要及时ctrl+S啊TAT

还有就是给url属性绑定data里面d字符串时，一定不要忘了给url绑定，即     ：url    。

